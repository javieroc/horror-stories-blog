---
import { getCollection, render } from 'astro:content';
import Prose from '../../components/Prose.astro';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const stories = await getCollection('stories');
  return stories.map(story => ({
    params: { id: story.id },
    props: { story },
  }));
}

const { story } = Astro.props;
const { Content } = await render(story);
---
<Layout title={story.data.title}>
  <main class="min-h-screen py-16 px-4 sm:px-6 lg:px-8 flex justify-center">
    <Prose>
      <Content />
    </Prose>
  </main>
</Layout>

<style>
  /* Images in prose */
  :global(.prose img) {
    max-width: 50%;
    margin: 2rem auto;
    display: block;
    border-radius: 0.75rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  @media (max-width: 768px) {
    :global(.prose img) {
      max-width: 100%;
    }
  }

  /* Blockquotes */
  :global(.prose blockquote) {
    font-style: italic;
    color: #4a5568; /* gray-700 */
    border-left: 4px solid #4299e1; /* blue-500 */
    padding-left: 1rem;
    margin: 1.5rem 0;
  }

  /* Code blocks */
  :global(.prose pre) {
    background-color: #f7fafc; /* gray-100 */
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
  }

  :global(.prose code) {
    background-color: #edf2f7; /* gray-200 */
    padding: 0.15rem 0.35rem;
    border-radius: 0.25rem;
    font-family: 'Fira Code', monospace;
  }

  /* Links hover effect */
  :global(.prose a:hover) {
    color: #2b6cb0; /* blue-700 */
    text-decoration: underline;
  }
</style>
